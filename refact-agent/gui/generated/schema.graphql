schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

input FExpertInput {
  fexp_allow_tools: String!
  fexp_block_tools: String!
  fexp_name: String!
  fexp_python_kernel: String!
  fexp_system_prompt: String!
  fexp_ver_major: Int!
  fexp_ver_minor: Int!
  located_fgroup_id: String!
  owner_fuser_id: String!
  owner_shared: Boolean!
}

type FExpertOutput {
  fexp_allow_tools: String!
  fexp_block_tools: String!
  fexp_name: String!
  fexp_python_kernel: String!
  fexp_system_prompt: String!
  fexp_ver_major: Int!
  fexp_ver_minor: Int!
  located_fgroup_id: String!
  owner_fuser_id: String!
  owner_shared: Boolean!
}

input FExpertPatch {
  located_fgroup_id: String = null
  owner_shared: Boolean = null
}

type FExpertSubs {
  news_action: String!
  news_payload: FExpertOutput!
  news_payload_id: String!
}

type FKnowledgeItem {
  iknow_created_ts: Float!
  iknow_goal: String!
  iknow_id: String!
  iknow_memory: String!
  iknow_modified_ts: Float!
  iknow_origin: String!
  iknow_stat_correct: Int!
  iknow_stat_relevant: Int!
  iknow_stat_times_used: Int!
  iknow_title: String!
  iknow_type: String!
  located_fgroup_id: String!
  owner_fuser_id: String!
  owner_shared: Boolean!
}

input FKnowledgeItemInput {
  iknow_goal: String!
  iknow_memory: String!
  iknow_title: String!
  iknow_type: String!
  located_fgroup_id: String!
  owner_shared: Boolean!
}

input FKnowledgeItemPatch {
  iknow_goal: String = null
  iknow_memory: String = null
  iknow_origin: String = null
  iknow_title: String = null
  iknow_type: String = null
  located_fgroup_id: String = null
  owner_shared: Boolean = null
}

type FKnowledgeItemSubs {
  news_action: String!
  news_payload: FKnowledgeItem
  news_payload_id: String!
}

type FThread {
  ft_anything_new: Boolean!
  ft_archived_ts: Float!
  ft_belongs_to_fce_id: String
  ft_created_ts: Float!
  ft_error: String!
  ft_fexp_name: String!
  ft_fexp_ver_major: Int!
  ft_fexp_ver_minor: Int!
  ft_id: String!
  ft_locked_by: String!
  ft_max_new_tokens: Int!
  ft_model: String!
  ft_n: Int!
  ft_need_assistant: Int!
  ft_need_tool_calls: Int!
  ft_temperature: Float!
  ft_title: String!
  ft_toolset: String!
  ft_updated_ts: Float!
  located_fgroup_id: String!
  owner_fuser_id: String!
  owner_shared: Boolean!
}

type FThreadDelta {
  ftm_content: JSON!
  ftm_role: String!
}

input FThreadInput {
  ft_belongs_to_fce_id: String
  ft_fexp_name: String!
  ft_fexp_ver_major: Int!
  ft_fexp_ver_minor: Int!
  ft_max_new_tokens: Int! = 8192
  ft_model: String! = ""
  ft_n: Int! = 1
  ft_temperature: Float! = 0
  ft_title: String!
  located_fgroup_id: String!
  owner_shared: Boolean!
}

type FThreadMessage {
  ftm_alt: Int!
  ftm_belongs_to_ft_id: String!
  ftm_call_id: String!
  ftm_content: JSON!
  ftm_created_ts: Float!
  ftm_num: Int!
  ftm_prev_alt: Int!
  ftm_role: String!
  ftm_tool_calls: JSON
  ftm_usage: JSON
}

input FThreadMessageInput {
  ftm_alt: Int!
  ftm_belongs_to_ft_id: String!
  ftm_call_id: String!
  ftm_content: String!
  ftm_num: Int!
  ftm_prev_alt: Int!
  ftm_provenance: String!
  ftm_role: String!
  ftm_tool_calls: String!
  ftm_usage: String!
}

type FThreadMessageSubs {
  news_action: String!
  news_payload: FThreadMessage
  news_payload_id: String!
  stream_delta: FThreadDelta
}

type FThreadMessagesCreateResult {
  count: Int!
  messages: [FThreadMessage!]!
}

input FThreadMultipleMessagesInput {
  ftm_belongs_to_ft_id: String!
  messages: [FThreadMessageInput!]!
}

input FThreadPatch {
  ft_anything_new: Boolean = null
  ft_archived_ts: Float = null
  ft_belongs_to_fce_id: String = null
  ft_error: String = null
  ft_max_new_tokens: Int = null
  ft_model: String = null
  ft_n: Int = null
  ft_temperature: Float = null
  ft_title: String = null
  ft_toolset: String = null
  located_fgroup_id: String = null
  owner_shared: Boolean = null
}

type FThreadSubs {
  news_action: String!
  news_payload: FThread
  news_payload_id: String!
}

type FlexusGroup {
  fgroup_created_ts: Float!
  fgroup_id: String!
  fgroup_name: String!
  fgroup_parent_id: String
  ws_id: String!
}

input FlexusGroupInput {
  fgroup_name: String!
  fgroup_parent_id: String!
}

input FlexusGroupPatch {
  fgroup_name: String = null
  fgroup_parent_id: String = null
}

"""
The JSON scalar type represents JSON values as Python objects
"""
scalar JSON

type Mutation {
  expert_create(input: FExpertInput!): FExpertOutput!
  expert_delete(id: String!): Boolean!
  expert_patch(id: String!, patch: FExpertPatch!): FExpertOutput!
  group_create(input: FlexusGroupInput!): FlexusGroup!
  group_delete(fgroup_id: String!): String!
  group_patch(fgroup_id: String!, patch: FlexusGroupPatch!): FlexusGroup!
  knowledge_item_create(input: FKnowledgeItemInput!): FKnowledgeItem!
  knowledge_item_delete(id: String!): Boolean!
  knowledge_item_patch(
    id: String!
    patch: FKnowledgeItemPatch!
  ): FKnowledgeItem!
  thread_create(input: FThreadInput!): FThread!
  thread_delete(id: String!): Boolean!
  thread_message_create(input: FThreadMessageInput!): FThreadMessage!
  thread_messages_create_multiple(
    input: FThreadMultipleMessagesInput!
  ): FThreadMessagesCreateResult!
  thread_patch(id: String!, patch: FThreadPatch!): FThread!
}

type Query {
  expert_list(
    limit: Int!
    located_fgroup_id: String!
    skip: Int!
    sort_by: String! = ""
  ): [FExpertOutput!]!
  knowledge_item_list(
    limit: Int!
    located_fgroup_id: String!
    skip: Int!
    sort_by: String! = ""
  ): [FKnowledgeItem!]!
  thread_list(
    limit: Int!
    located_fgroup_id: String!
    skip: Int!
    sort_by: String! = ""
  ): [FThread!]!
  thread_messages(
    alt: Int = null
    ft_id: String!
    limit: Int = null
    num: Int = null
    role: String = null
  ): [FThreadMessage!]!
  thread_messages_by_alt(alt: Int!, ft_id: String!): [FThreadMessage!]!
}

type Subscription {
  comprehensive_thread_subs(
    ft_id: String!
    want_deltas: Boolean!
  ): FThreadMessageSubs!
  experts_in_group(
    limit: Int!
    located_fgroup_id: String!
    sort_by: String! = ""
  ): FExpertSubs!
  knowledge_items_in_group(
    limit: Int!
    located_fgroup_id: String!
    sort_by: String! = ""
  ): FKnowledgeItemSubs!
  threads_in_group(
    limit: Int!
    located_fgroup_id: String!
    sort_by: String! = ""
  ): FThreadSubs!
  tree_subscription(ws_id: String!): TreeUpdateSubs!
}

type TreeUpdateSubs {
  treeupd_action: String!
  treeupd_id: String!
  treeupd_path: String!
  treeupd_title: String!
  treeupd_type: String!
}
